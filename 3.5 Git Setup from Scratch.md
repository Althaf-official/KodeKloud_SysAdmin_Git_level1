Some new developers have joined xFusionCorp Industries and have been assigned Nautilus project. They are going to start development on a new application, and some pre-requisites have been shared with the DevOps team to proceed with. Please note that all tasks need to be performed on storage server in Stratos DC.



a. Install git, set up any values for user.email and user.name globally and create a bare repository /opt/demo.git.


b. There is an update hook (to block direct pushes to the master branch) under /tmp on storage server itself; use the same to block direct pushes to the master branch in /opt/demo.git repo.


c. Clone /opt/demo.git repo in /usr/src/kodekloudrepos/demo directory.


d. Create a new branch named xfusioncorp_demo in repo that you cloned under /usr/src/kodekloudrepos directory.


e. There is a readme.md file in /tmp directory on storage server itself; copy that to the repo, add/commit in the new branch you just created, and finally push your branch to the origin.


f. Also create master branch from your branch and remember you should not be able to push to the master directly as per the hook you have set up

------

### fatiled attempt 1
```ruby
thor@jump_host ~$ ssh natasha@ststor01
The authenticity of host 'ststor01 (172.16.238.15)' can't be established.
ECDSA key fingerprint is SHA256:hSDUaAhe+86E/XaVCPxp7wBde6CyWOzT8hTnbYXzMU0.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'ststor01,172.16.238.15' (ECDSA) to the list of known hosts.
natasha@ststor01's password: 
[natasha@ststor01 ~]$ sudo su -

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for natasha: 
[root@ststor01 ~]# 
[root@ststor01 ~]# 
[root@ststor01 ~]# # Install Git
[root@ststor01 ~]# sudo apt-get update
sudo: apt-get: command not found
[root@ststor01 ~]# sudo apt-get install git
sudo: apt-get: command not found
[root@ststor01 ~]# apt-get update
-bash: apt-get: command not found
[root@ststor01 ~]# git -v
-bash: git: command not found
[root@ststor01 ~]# yum install git
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered with an entitlement server. You can use subscription-manager to register.

Last metadata expiration check: 0:06:48 ago on Tue Dec 19 06:09:52 2023.
Dependencies resolved.
============================================================================================
 Package                  Arch     Version                                Repository   Size
============================================================================================
Installing:
 git                      x86_64   2.43.0-1.el8                           appstream    92 k
Installing dependencies:
 emacs-filesystem         noarch   1:26.1-11.el8                          baseos       70 k
 git-core                 x86_64   2.43.0-1.el8                           appstream    11 M
 git-core-doc             noarch   2.43.0-1.el8                           appstream   3.3 M
 groff-base               x86_64   1.22.3-18.el8                          baseos      1.0 M
 less                     x86_64   530-1.el8                              baseos      164 k
 ncurses                  x86_64   6.1-9.20180224.el8                     baseos      387 k
 perl-Carp                noarch   1.42-396.el8                           baseos       30 k
 perl-Encode              x86_64   4:2.97-3.el8                           baseos      1.5 M
 perl-Errno               x86_64   1.28-422.el8                           baseos       76 k
 perl-Error               noarch   1:0.17025-2.el8                        appstream    46 k
 perl-Exporter            noarch   5.72-396.el8                           baseos       34 k
 perl-File-Path           noarch   2.15-2.el8                             baseos       38 k
 perl-File-Temp           noarch   0.230.600-1.el8                        baseos       63 k
 perl-Getopt-Long         noarch   1:2.50-4.el8                           baseos       63 k
 perl-Git                 noarch   2.43.0-1.el8                           appstream    79 k
 perl-HTTP-Tiny           noarch   0.074-1.el8                            baseos       58 k
 perl-IO                  x86_64   1.38-422.el8                           baseos      142 k
 perl-MIME-Base64         x86_64   3.15-396.el8                           baseos       31 k
 perl-PathTools           x86_64   3.74-1.el8                             baseos       90 k
 perl-Pod-Escapes         noarch   1:1.07-395.el8                         baseos       20 k
 perl-Pod-Perldoc         noarch   3.28-396.el8                           baseos       86 k
 perl-Pod-Simple          noarch   1:3.35-395.el8                         baseos      213 k
 perl-Pod-Usage           noarch   4:1.69-395.el8                         baseos       34 k
 perl-Scalar-List-Utils   x86_64   3:1.49-2.el8                           baseos       68 k
 perl-Socket              x86_64   4:2.027-3.el8                          baseos       59 k
 perl-Storable            x86_64   1:3.11-3.el8                           baseos       98 k
 perl-Term-ANSIColor      noarch   4.06-396.el8                           baseos       46 k
 perl-Term-Cap            noarch   1.17-395.el8                           baseos       23 k
 perl-TermReadKey         x86_64   2.37-7.el8                             appstream    40 k
 perl-Text-ParseWords     noarch   3.30-395.el8                           baseos       18 k
 perl-Text-Tabs+Wrap      noarch   2013.0523-395.el8                      baseos       24 k
 perl-Time-Local          noarch   1:1.280-1.el8                          baseos       34 k
 perl-Unicode-Normalize   x86_64   1.25-396.el8                           baseos       82 k
 perl-constant            noarch   1.33-396.el8                           baseos       25 k
 perl-interpreter         x86_64   4:5.26.3-422.el8                       baseos      6.3 M
 perl-libs                x86_64   4:5.26.3-422.el8                       baseos      1.6 M
 perl-macros              x86_64   4:5.26.3-422.el8                       baseos       73 k
 perl-parent              noarch   1:0.237-1.el8                          baseos       20 k
 perl-podlators           noarch   4.11-1.el8                             baseos      118 k
 perl-threads             x86_64   1:2.21-2.el8                           baseos       61 k
 perl-threads-shared      x86_64   1.58-2.el8                             baseos       48 k
Installing weak dependencies:
 perl-IO-Socket-IP        noarch   0.39-5.el8                             appstream    47 k
 perl-Mozilla-CA          noarch   20160104-7.module_el8+645+9d809f8c     appstream    15 k

Transaction Summary
============================================================================================
Install  44 Packages

Total download size: 27 M
Installed size: 84 M
Is this ok [y/N]: y
Downloading Packages:
(1/44): git-2.43.0-1.el8.x86_64.rpm                         530 kB/s |  92 kB     00:00    
(2/44): perl-Error-0.17025-2.el8.noarch.rpm                 770 kB/s |  46 kB     00:00    
(3/44): perl-Git-2.43.0-1.el8.noarch.rpm                    1.5 MB/s |  79 kB     00:00    
(4/44): perl-IO-Socket-IP-0.39-5.el8.noarch.rpm             990 kB/s |  47 kB     00:00    
(5/44): perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c. 104 kB/s |  15 kB     00:00    
(6/44): perl-TermReadKey-2.37-7.el8.x86_64.rpm              820 kB/s |  40 kB     00:00    
(7/44): emacs-filesystem-26.1-11.el8.noarch.rpm             330 kB/s |  70 kB     00:00    
(8/44): groff-base-1.22.3-18.el8.x86_64.rpm                 4.1 MB/s | 1.0 MB     00:00    
(9/44): less-530-1.el8.x86_64.rpm                           3.1 MB/s | 164 kB     00:00    
(10/44): ncurses-6.1-9.20180224.el8.x86_64.rpm              6.9 MB/s | 387 kB     00:00    
(11/44): perl-Carp-1.42-396.el8.noarch.rpm                  594 kB/s |  30 kB     00:00    
(12/44): git-core-doc-2.43.0-1.el8.noarch.rpm               2.7 MB/s | 3.3 MB     00:01    
(13/44): perl-Encode-2.97-3.el8.x86_64.rpm                   13 MB/s | 1.5 MB     00:00    
(14/44): perl-Exporter-5.72-396.el8.noarch.rpm              662 kB/s |  34 kB     00:00    
(15/44): perl-File-Path-2.15-2.el8.noarch.rpm               760 kB/s |  38 kB     00:00    
(16/44): perl-File-Temp-0.230.600-1.el8.noarch.rpm          1.2 MB/s |  63 kB     00:00    
(17/44): perl-Errno-1.28-422.el8.x86_64.rpm                 406 kB/s |  76 kB     00:00    
(18/44): perl-Getopt-Long-2.50-4.el8.noarch.rpm             1.2 MB/s |  63 kB     00:00    
(19/44): perl-HTTP-Tiny-0.074-1.el8.noarch.rpm              1.1 MB/s |  58 kB     00:00    
(20/44): perl-IO-1.38-422.el8.x86_64.rpm                    2.7 MB/s | 142 kB     00:00    
(21/44): perl-MIME-Base64-3.15-396.el8.x86_64.rpm           611 kB/s |  31 kB     00:00    
(22/44): perl-PathTools-3.74-1.el8.x86_64.rpm               1.7 MB/s |  90 kB     00:00    
(23/44): perl-Pod-Escapes-1.07-395.el8.noarch.rpm           411 kB/s |  20 kB     00:00    
(24/44): perl-Pod-Perldoc-3.28-396.el8.noarch.rpm           1.6 MB/s |  86 kB     00:00    
(25/44): perl-Pod-Usage-1.69-395.el8.noarch.rpm             661 kB/s |  34 kB     00:00    
(26/44): perl-Pod-Simple-3.35-395.el8.noarch.rpm            2.0 MB/s | 213 kB     00:00    
(27/44): perl-Scalar-List-Utils-1.49-2.el8.x86_64.rpm       1.3 MB/s |  68 kB     00:00    
(28/44): perl-Socket-2.027-3.el8.x86_64.rpm                 1.2 MB/s |  59 kB     00:00    
(29/44): perl-Storable-3.11-3.el8.x86_64.rpm                1.9 MB/s |  98 kB     00:00    
(30/44): perl-Term-ANSIColor-4.06-396.el8.noarch.rpm        884 kB/s |  46 kB     00:00    
(31/44): perl-Term-Cap-1.17-395.el8.noarch.rpm              426 kB/s |  23 kB     00:00    
(32/44): perl-Text-ParseWords-3.30-395.el8.noarch.rpm       344 kB/s |  18 kB     00:00    
(33/44): git-core-2.43.0-1.el8.x86_64.rpm                   5.8 MB/s |  11 MB     00:01    
(34/44): perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch.rpm   289 kB/s |  24 kB     00:00    
(35/44): perl-Time-Local-1.280-1.el8.noarch.rpm             462 kB/s |  34 kB     00:00    
(36/44): perl-constant-1.33-396.el8.noarch.rpm              481 kB/s |  25 kB     00:00    
(37/44): perl-libs-5.26.3-422.el8.x86_64.rpm                 23 MB/s | 1.6 MB     00:00    
(38/44): perl-macros-5.26.3-422.el8.x86_64.rpm              1.3 MB/s |  73 kB     00:00    
(39/44): perl-Unicode-Normalize-1.25-396.el8.x86_64.rpm     425 kB/s |  82 kB     00:00    
(40/44): perl-parent-0.237-1.el8.noarch.rpm                 210 kB/s |  20 kB     00:00    
(41/44): perl-interpreter-5.26.3-422.el8.x86_64.rpm          20 MB/s | 6.3 MB     00:00    
(42/44): perl-podlators-4.11-1.el8.noarch.rpm               898 kB/s | 118 kB     00:00    
(43/44): perl-threads-2.21-2.el8.x86_64.rpm                 1.1 MB/s |  61 kB     00:00    
(44/44): perl-threads-shared-1.58-2.el8.x86_64.rpm          970 kB/s |  48 kB     00:00    
--------------------------------------------------------------------------------------------
Total                                                        11 MB/s |  27 MB     00:02     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                    1/1 
  Installing       : ncurses-6.1-9.20180224.el8.x86_64                                 1/44 
  Installing       : less-530-1.el8.x86_64                                             2/44 
  Installing       : git-core-2.43.0-1.el8.x86_64                                      3/44 
  Installing       : git-core-doc-2.43.0-1.el8.noarch                                  4/44 
  Installing       : groff-base-1.22.3-18.el8.x86_64                                   5/44 
  Installing       : perl-Pod-Escapes-1:1.07-395.el8.noarch                            6/44 
  Installing       : perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch         7/44 
  Installing       : perl-Time-Local-1:1.280-1.el8.noarch                              8/44 
  Installing       : perl-IO-Socket-IP-0.39-5.el8.noarch                               9/44 
  Installing       : perl-Term-ANSIColor-4.06-396.el8.noarch                          10/44 
  Installing       : perl-Term-Cap-1.17-395.el8.noarch                                11/44 
  Installing       : perl-File-Temp-0.230.600-1.el8.noarch                            12/44 
  Installing       : perl-Pod-Simple-1:3.35-395.el8.noarch                            13/44 
  Installing       : perl-HTTP-Tiny-0.074-1.el8.noarch                                14/44 
  Installing       : perl-podlators-4.11-1.el8.noarch                                 15/44 
  Installing       : perl-Pod-Perldoc-3.28-396.el8.noarch                             16/44 
  Installing       : perl-Text-ParseWords-3.30-395.el8.noarch                         17/44 
  Installing       : perl-Pod-Usage-4:1.69-395.el8.noarch                             18/44 
  Installing       : perl-MIME-Base64-3.15-396.el8.x86_64                             19/44 
  Installing       : perl-Storable-1:3.11-3.el8.x86_64                                20/44 
  Installing       : perl-Getopt-Long-1:2.50-4.el8.noarch                             21/44 
  Installing       : perl-Errno-1.28-422.el8.x86_64                                   22/44 
  Installing       : perl-Socket-4:2.027-3.el8.x86_64                                 23/44 
  Installing       : perl-Encode-4:2.97-3.el8.x86_64                                  24/44 
  Installing       : perl-Carp-1.42-396.el8.noarch                                    25/44 
  Installing       : perl-Exporter-5.72-396.el8.noarch                                26/44 
  Installing       : perl-libs-4:5.26.3-422.el8.x86_64                                27/44 
  Installing       : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                       28/44 
  Installing       : perl-parent-1:0.237-1.el8.noarch                                 29/44 
  Installing       : perl-macros-4:5.26.3-422.el8.x86_64                              30/44 
  Installing       : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                     31/44 
  Installing       : perl-Unicode-Normalize-1.25-396.el8.x86_64                       32/44 
  Installing       : perl-File-Path-2.15-2.el8.noarch                                 33/44 
  Installing       : perl-IO-1.38-422.el8.x86_64                                      34/44 
  Installing       : perl-PathTools-3.74-1.el8.x86_64                                 35/44 
  Installing       : perl-constant-1.33-396.el8.noarch                                36/44 
  Installing       : perl-threads-1:2.21-2.el8.x86_64                                 37/44 
  Installing       : perl-threads-shared-1.58-2.el8.x86_64                            38/44 
  Installing       : perl-interpreter-4:5.26.3-422.el8.x86_64                         39/44 
  Installing       : perl-Error-1:0.17025-2.el8.noarch                                40/44 
  Installing       : perl-TermReadKey-2.37-7.el8.x86_64                               41/44 
  Installing       : emacs-filesystem-1:26.1-11.el8.noarch                            42/44 
  Installing       : perl-Git-2.43.0-1.el8.noarch                                     43/44 
  Installing       : git-2.43.0-1.el8.x86_64                                          44/44 
  Running scriptlet: git-2.43.0-1.el8.x86_64                                          44/44 
  Verifying        : git-2.43.0-1.el8.x86_64                                           1/44 
  Verifying        : git-core-2.43.0-1.el8.x86_64                                      2/44 
  Verifying        : git-core-doc-2.43.0-1.el8.noarch                                  3/44 
  Verifying        : perl-Error-1:0.17025-2.el8.noarch                                 4/44 
  Verifying        : perl-Git-2.43.0-1.el8.noarch                                      5/44 
  Verifying        : perl-IO-Socket-IP-0.39-5.el8.noarch                               6/44 
  Verifying        : perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch         7/44 
  Verifying        : perl-TermReadKey-2.37-7.el8.x86_64                                8/44 
  Verifying        : emacs-filesystem-1:26.1-11.el8.noarch                             9/44 
  Verifying        : groff-base-1.22.3-18.el8.x86_64                                  10/44 
  Verifying        : less-530-1.el8.x86_64                                            11/44 
  Verifying        : ncurses-6.1-9.20180224.el8.x86_64                                12/44 
  Verifying        : perl-Carp-1.42-396.el8.noarch                                    13/44 
  Verifying        : perl-Encode-4:2.97-3.el8.x86_64                                  14/44 
  Verifying        : perl-Errno-1.28-422.el8.x86_64                                   15/44 
  Verifying        : perl-Exporter-5.72-396.el8.noarch                                16/44 
  Verifying        : perl-File-Path-2.15-2.el8.noarch                                 17/44 
  Verifying        : perl-File-Temp-0.230.600-1.el8.noarch                            18/44 
  Verifying        : perl-Getopt-Long-1:2.50-4.el8.noarch                             19/44 
  Verifying        : perl-HTTP-Tiny-0.074-1.el8.noarch                                20/44 
  Verifying        : perl-IO-1.38-422.el8.x86_64                                      21/44 
  Verifying        : perl-MIME-Base64-3.15-396.el8.x86_64                             22/44 
  Verifying        : perl-PathTools-3.74-1.el8.x86_64                                 23/44 
  Verifying        : perl-Pod-Escapes-1:1.07-395.el8.noarch                           24/44 
  Verifying        : perl-Pod-Perldoc-3.28-396.el8.noarch                             25/44 
  Verifying        : perl-Pod-Simple-1:3.35-395.el8.noarch                            26/44 
  Verifying        : perl-Pod-Usage-4:1.69-395.el8.noarch                             27/44 
  Verifying        : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                       28/44 
  Verifying        : perl-Socket-4:2.027-3.el8.x86_64                                 29/44 
  Verifying        : perl-Storable-1:3.11-3.el8.x86_64                                30/44 
  Verifying        : perl-Term-ANSIColor-4.06-396.el8.noarch                          31/44 
  Verifying        : perl-Term-Cap-1.17-395.el8.noarch                                32/44 
  Verifying        : perl-Text-ParseWords-3.30-395.el8.noarch                         33/44 
  Verifying        : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                     34/44 
  Verifying        : perl-Time-Local-1:1.280-1.el8.noarch                             35/44 
  Verifying        : perl-Unicode-Normalize-1.25-396.el8.x86_64                       36/44 
  Verifying        : perl-constant-1.33-396.el8.noarch                                37/44 
  Verifying        : perl-interpreter-4:5.26.3-422.el8.x86_64                         38/44 
  Verifying        : perl-libs-4:5.26.3-422.el8.x86_64                                39/44 
  Verifying        : perl-macros-4:5.26.3-422.el8.x86_64                              40/44 
  Verifying        : perl-parent-1:0.237-1.el8.noarch                                 41/44 
  Verifying        : perl-podlators-4.11-1.el8.noarch                                 42/44 
  Verifying        : perl-threads-1:2.21-2.el8.x86_64                                 43/44 
  Verifying        : perl-threads-shared-1.58-2.el8.x86_64                            44/44 
Installed products updated.

Installed:
  emacs-filesystem-1:26.1-11.el8.noarch                                                     
  git-2.43.0-1.el8.x86_64                                                                   
  git-core-2.43.0-1.el8.x86_64                                                              
  git-core-doc-2.43.0-1.el8.noarch                                                          
  groff-base-1.22.3-18.el8.x86_64                                                           
  less-530-1.el8.x86_64                                                                     
  ncurses-6.1-9.20180224.el8.x86_64                                                         
  perl-Carp-1.42-396.el8.noarch                                                             
  perl-Encode-4:2.97-3.el8.x86_64                                                           
  perl-Errno-1.28-422.el8.x86_64                                                            
  perl-Error-1:0.17025-2.el8.noarch                                                         
  perl-Exporter-5.72-396.el8.noarch                                                         
  perl-File-Path-2.15-2.el8.noarch                                                          
  perl-File-Temp-0.230.600-1.el8.noarch                                                     
  perl-Getopt-Long-1:2.50-4.el8.noarch                                                      
  perl-Git-2.43.0-1.el8.noarch                                                              
  perl-HTTP-Tiny-0.074-1.el8.noarch                                                         
  perl-IO-1.38-422.el8.x86_64                                                               
  perl-IO-Socket-IP-0.39-5.el8.noarch                                                       
  perl-MIME-Base64-3.15-396.el8.x86_64                                                      
  perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch                                 
  perl-PathTools-3.74-1.el8.x86_64                                                          
  perl-Pod-Escapes-1:1.07-395.el8.noarch                                                    
  perl-Pod-Perldoc-3.28-396.el8.noarch                                                      
  perl-Pod-Simple-1:3.35-395.el8.noarch                                                     
  perl-Pod-Usage-4:1.69-395.el8.noarch                                                      
  perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                                                
  perl-Socket-4:2.027-3.el8.x86_64                                                          
  perl-Storable-1:3.11-3.el8.x86_64                                                         
  perl-Term-ANSIColor-4.06-396.el8.noarch                                                   
  perl-Term-Cap-1.17-395.el8.noarch                                                         
  perl-TermReadKey-2.37-7.el8.x86_64                                                        
  perl-Text-ParseWords-3.30-395.el8.noarch                                                  
  perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                                              
  perl-Time-Local-1:1.280-1.el8.noarch                                                      
  perl-Unicode-Normalize-1.25-396.el8.x86_64                                                
  perl-constant-1.33-396.el8.noarch                                                         
  perl-interpreter-4:5.26.3-422.el8.x86_64                                                  
  perl-libs-4:5.26.3-422.el8.x86_64                                                         
  perl-macros-4:5.26.3-422.el8.x86_64                                                       
  perl-parent-1:0.237-1.el8.noarch                                                          
  perl-podlators-4.11-1.el8.noarch                                                          
  perl-threads-1:2.21-2.el8.x86_64                                                          
  perl-threads-shared-1.58-2.el8.x86_64                                                     

Complete!
[root@ststor01 ~]# git config --global user.email "your_email@example.com"
[root@ststor01 ~]# git config --global user.name "Your Name"
[root@ststor01 ~]# # Create a bare repository
[root@ststor01 ~]# sudo mkdir /opt/demo.git
[root@ststor01 ~]# cd /opt/demo.git
[root@ststor01 demo.git]# git init --bare
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint:   git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint:   git branch -m <name>
Initialized empty Git repository in /opt/demo.git/
[root@ststor01 demo.git]# ls
HEAD  branches  config  description  hooks  info  objects  refs
[root@ststor01 demo.git]# sudo cp /tmp/update-hook /opt/demo.git/hooks/update
cp: cannot stat '/tmp/update-hook': No such file or directory
[root@ststor01 demo.git]# cd ..
[root@ststor01 opt]# ls
demo.git
[root@ststor01 opt]# cd /tmp/
[root@ststor01 tmp]# ls
ks-script-kzk1nzfd  ks-script-l36mq90h  readme.md  update
[root@ststor01 tmp]# cd update 
-bash: cd: update: Not a directory
[root@ststor01 tmp]# cat update 
#!/bin/sh
if [ "$1" == refs/heads/master ];
then
  echo "Manual pushes to the master branch is restricted!!"
  exit 1
fi[root@ststor01 tmp]# pwd
/tmp
[root@ststor01 tmp]# cd /opt/demo.git/hooks/
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update.sample
pre-applypatch.sample      pre-receive.sample
[root@ststor01 hooks]# sudo cp /tmp/update /opt/demo.git/hooks/
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update
pre-applypatch.sample      pre-receive.sample       update.sample
[root@ststor01 hooks]# cat update
#!/bin/sh
if [ "$1" == refs/heads/master ];
then
  echo "Manual pushes to the master branch is restricted!!"
  exit 1
fi[root@ststor01 hooks]# cat update.sample 
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
        echo "Don't run this script from the command line." >&2
        echo " (if you want, you could supply GIT_DIR then run" >&2
        echo "  $0 <ref> <oldrev> <newrev>)" >&2
        exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
        echo "usage: $0 <ref> <oldrev> <newrev>" >&2
        exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
        echo "*** Project description file hasn't been set" >&2
        exit 1
        ;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
        newrev_type=delete
else
        newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
        refs/tags/*,commit)
                # un-annotated tag
                short_refname=${refname##refs/tags/}
                if [ "$allowunannotated" != "true" ]; then
                        echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
                        echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
                        exit 1
                fi
                ;;
        refs/tags/*,delete)
                # delete tag
                if [ "$allowdeletetag" != "true" ]; then
                        echo "*** Deleting a tag is not allowed in this repository" >&2
                        exit 1
                fi
                ;;
        refs/tags/*,tag)
                # annotated tag
                if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
                then
                        echo "*** Tag '$refname' already exists." >&2
                        echo "*** Modifying a tag is not allowed in this repository." >&2
                        exit 1
                fi
                ;;
        refs/heads/*,commit)
                # branch
                if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
                        echo "*** Creating a branch is not allowed in this repository" >&2
                        exit 1
                fi
                ;;
        refs/heads/*,delete)
                # delete branch
                if [ "$allowdeletebranch" != "true" ]; then
                        echo "*** Deleting a branch is not allowed in this repository" >&2
                        exit 1
                fi
                ;;
        refs/remotes/*,commit)
                # tracking branch
                ;;
        refs/remotes/*,delete)
                # delete tracking branch
                if [ "$allowdeletebranch" != "true" ]; then
                        echo "*** Deleting a tracking branch is not allowed in this repository" >&2
                        exit 1
                fi
                ;;
        *)
                # Anything else (is there anything else?)
                echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
                exit 1
                ;;
esac

# --- Finished
exit 0
[root@ststor01 hooks]# rm update
rm: remove regular file 'update'? Y
[root@ststor01 hooks]# L
-bash: L: command not found
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update.sample
pre-applypatch.sample      pre-receive.sample
[root@ststor01 hooks]# pwd
/opt/demo.git/hooks
[root@ststor01 hooks]# sudo mv /tmp/update-hook /opt/demo.git/hooks/update
mv: cannot stat '/tmp/update-hook': No such file or directory
[root@ststor01 hooks]# sudo mv /opt/demo.git/update.sample /opt/demo.git/hooks/update
mv: cannot stat '/opt/demo.git/update.sample': No such file or directory
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update.sample
pre-applypatch.sample      pre-receive.sample
[root@ststor01 hooks]# mv /opt/demo.git/update.sample /opt/demo.git/hooks/update
mv: cannot stat '/opt/demo.git/update.sample': No such file or directory
[root@ststor01 hooks]# sudo mv /opt/demo.git/hooks/update.sample /opt/demo.git/hooks/update
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update
pre-applypatch.sample      pre-receive.sample
[root@ststor01 hooks]# sudo chmod +x /opt/demo.git/hooks/update
[root@ststor01 hooks]# mkdir -p /usr/src/kodekloudrepos
[root@ststor01 hooks]# cd /usr/src/kodekloudrepos
[root@ststor01 kodekloudrepos]# git clone /opt/demo.git demo
Cloning into 'demo'...
warning: You appear to have cloned an empty repository.
done.
[root@ststor01 kodekloudrepos]# ls
demo
[root@ststor01 kodekloudrepos]# ce demo/
-bash: ce: command not found
[root@ststor01 kodekloudrepos]# ls
demo
[root@ststor01 kodekloudrepos]# cd demo/
[root@ststor01 demo]# ls
[root@ststor01 demo]# cd ..
[root@ststor01 kodekloudrepos]# cd demo
[root@ststor01 demo]# git checkout -b xfusioncorp_demo
Switched to a new branch 'xfusioncorp_demo'
[root@ststor01 demo]# cp /tmp/readme.md /usr/src/kodekloudrepos/demo/
[root@ststor01 demo]# cd /usr/src/kodekloudrepos/demo
[root@ststor01 demo]# ls
readme.md
[root@ststor01 demo]# cat readme.md 
Welcome to xFusionCorp Industries[root@ststor01 demo]# git add readme.md
[root@ststor01 demo]# git commit -m "Add readme.md"
[xfusioncorp_demo (root-commit) d6d4249] Add readme.md
 1 file changed, 1 insertion(+)
 create mode 100644 readme.md
[root@ststor01 demo]# git push origin xfusioncorp_demo
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Writing objects: 100% (3/3), 249 bytes | 249.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
remote: *** Project description file hasn't been set
remote: error: hook declined to update refs/heads/xfusioncorp_demo
To /opt/demo.git
 ! [remote rejected] xfusioncorp_demo -> xfusioncorp_demo (hook declined)
error: failed to push some refs to '/opt/demo.git'
[root@ststor01 demo]# git checkout -b master xfusioncorp_demo
Switched to a new branch 'master'
Your branch is based on 'origin/master', but the upstream is gone.
  (use "git branch --unset-upstream" to fixup)
[root@ststor01 demo]# git branch
* master
  xfusioncorp_demo
[root@ststor01 demo]#

```
### reason : - 'xfusioncorp_demo' branch in '/usr/src/kodekloudrepos/demo' repo does not contain 'readme.md' file or changes were not pushed to origin


### passed attempt

```ruby
thor@jump_host ~$ ssh natasha@ststor01
The authenticity of host 'ststor01 (172.16.238.15)' can't be established.
ECDSA key fingerprint is SHA256:QXxyjiR+DQAD74uIunw5wZj8NAaHQjlfv1poqJfKV38.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'ststor01,172.16.238.15' (ECDSA) to the list of known hosts.
natasha@ststor01's password: 
[natasha@ststor01 ~]$ 
[natasha@ststor01 ~]$ 
[natasha@ststor01 ~]$ sudo su -

We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for natasha: 
[root@ststor01 ~]# 
[root@ststor01 ~]# 
[root@ststor01 ~]# 
[root@ststor01 ~]# ls
anaconda-ks.cfg  anaconda-post-nochroot.log  anaconda-post.log  buildinfo  original-ks.cfg
[root@ststor01 ~]# yum install git
Updating Subscription Management repositories.
Unable to read consumer identity

This system is not registered with an entitlement server. You can use subscription-manager to register.

CentOS Stream 8 - AppStream                                  12 kB/s | 4.4 kB     00:00    
CentOS Stream 8 - AppStream                                  51 MB/s |  35 MB     00:00    
CentOS Stream 8 - BaseOS                                     20 kB/s | 3.9 kB     00:00    
CentOS Stream 8 - BaseOS                                     99 MB/s |  57 MB     00:00    
CentOS Stream 8 - Extras                                     18 kB/s | 2.9 kB     00:00    
CentOS Stream 8 - Extras common packages                     21 kB/s | 3.0 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - BaseOS              822 kB/s | 717 kB     00:00    
Red Hat Universal Base Image 8 (RPMs) - AppStream           4.1 MB/s | 3.0 MB     00:00    
Red Hat Universal Base Image 8 (RPMs) - CodeReady Builder   106 kB/s | 102 kB     00:00    
Dependencies resolved.
============================================================================================
 Package                  Arch     Version                                Repository   Size
============================================================================================
Installing:
 git                      x86_64   2.43.0-1.el8                           appstream    92 k
Installing dependencies:
 emacs-filesystem         noarch   1:26.1-11.el8                          baseos       70 k
 git-core                 x86_64   2.43.0-1.el8                           appstream    11 M
 git-core-doc             noarch   2.43.0-1.el8                           appstream   3.3 M
 groff-base               x86_64   1.22.3-18.el8                          baseos      1.0 M
 less                     x86_64   530-1.el8                              baseos      164 k
 ncurses                  x86_64   6.1-9.20180224.el8                     baseos      387 k
 perl-Carp                noarch   1.42-396.el8                           baseos       30 k
 perl-Encode              x86_64   4:2.97-3.el8                           baseos      1.5 M
 perl-Errno               x86_64   1.28-422.el8                           baseos       76 k
 perl-Error               noarch   1:0.17025-2.el8                        appstream    46 k
 perl-Exporter            noarch   5.72-396.el8                           baseos       34 k
 perl-File-Path           noarch   2.15-2.el8                             baseos       38 k
 perl-File-Temp           noarch   0.230.600-1.el8                        baseos       63 k
 perl-Getopt-Long         noarch   1:2.50-4.el8                           baseos       63 k
 perl-Git                 noarch   2.43.0-1.el8                           appstream    79 k
 perl-HTTP-Tiny           noarch   0.074-1.el8                            baseos       58 k
 perl-IO                  x86_64   1.38-422.el8                           baseos      142 k
 perl-MIME-Base64         x86_64   3.15-396.el8                           baseos       31 k
 perl-PathTools           x86_64   3.74-1.el8                             baseos       90 k
 perl-Pod-Escapes         noarch   1:1.07-395.el8                         baseos       20 k
 perl-Pod-Perldoc         noarch   3.28-396.el8                           baseos       86 k
 perl-Pod-Simple          noarch   1:3.35-395.el8                         baseos      213 k
 perl-Pod-Usage           noarch   4:1.69-395.el8                         baseos       34 k
 perl-Scalar-List-Utils   x86_64   3:1.49-2.el8                           baseos       68 k
 perl-Socket              x86_64   4:2.027-3.el8                          baseos       59 k
 perl-Storable            x86_64   1:3.11-3.el8                           baseos       98 k
 perl-Term-ANSIColor      noarch   4.06-396.el8                           baseos       46 k
 perl-Term-Cap            noarch   1.17-395.el8                           baseos       23 k
 perl-TermReadKey         x86_64   2.37-7.el8                             appstream    40 k
 perl-Text-ParseWords     noarch   3.30-395.el8                           baseos       18 k
 perl-Text-Tabs+Wrap      noarch   2013.0523-395.el8                      baseos       24 k
 perl-Time-Local          noarch   1:1.280-1.el8                          baseos       34 k
 perl-Unicode-Normalize   x86_64   1.25-396.el8                           baseos       82 k
 perl-constant            noarch   1.33-396.el8                           baseos       25 k
 perl-interpreter         x86_64   4:5.26.3-422.el8                       baseos      6.3 M
 perl-libs                x86_64   4:5.26.3-422.el8                       baseos      1.6 M
 perl-macros              x86_64   4:5.26.3-422.el8                       baseos       73 k
 perl-parent              noarch   1:0.237-1.el8                          baseos       20 k
 perl-podlators           noarch   4.11-1.el8                             baseos      118 k
 perl-threads             x86_64   1:2.21-2.el8                           baseos       61 k
 perl-threads-shared      x86_64   1.58-2.el8                             baseos       48 k
Installing weak dependencies:
 perl-IO-Socket-IP        noarch   0.39-5.el8                             appstream    47 k
 perl-Mozilla-CA          noarch   20160104-7.module_el8+645+9d809f8c     appstream    15 k

Transaction Summary
============================================================================================
Install  44 Packages

Total download size: 27 M
Installed size: 84 M
Is this ok [y/N]: y
Downloading Packages:
(1/44): git-2.43.0-1.el8.x86_64.rpm                         1.1 MB/s |  92 kB     00:00    
(2/44): perl-Error-0.17025-2.el8.noarch.rpm                 2.6 MB/s |  46 kB     00:00    
(3/44): perl-Git-2.43.0-1.el8.noarch.rpm                    4.0 MB/s |  79 kB     00:00    
(4/44): perl-IO-Socket-IP-0.39-5.el8.noarch.rpm             3.0 MB/s |  47 kB     00:00    
(5/44): perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c. 889 kB/s |  15 kB     00:00    
(6/44): perl-TermReadKey-2.37-7.el8.x86_64.rpm              2.4 MB/s |  40 kB     00:00    
(7/44): git-core-doc-2.43.0-1.el8.noarch.rpm                 18 MB/s | 3.3 MB     00:00    
(8/44): git-core-2.43.0-1.el8.x86_64.rpm                     42 MB/s |  11 MB     00:00    
(9/44): emacs-filesystem-26.1-11.el8.noarch.rpm             681 kB/s |  70 kB     00:00    
(10/44): less-530-1.el8.x86_64.rpm                          2.6 MB/s | 164 kB     00:00    
(11/44): groff-base-1.22.3-18.el8.x86_64.rpm                6.8 MB/s | 1.0 MB     00:00    
(12/44): perl-Carp-1.42-396.el8.noarch.rpm                  2.1 MB/s |  30 kB     00:00    
(13/44): ncurses-6.1-9.20180224.el8.x86_64.rpm              4.6 MB/s | 387 kB     00:00    
(14/44): perl-Errno-1.28-422.el8.x86_64.rpm                 4.8 MB/s |  76 kB     00:00    
(15/44): perl-Exporter-5.72-396.el8.noarch.rpm              2.2 MB/s |  34 kB     00:00    
(16/44): perl-Encode-2.97-3.el8.x86_64.rpm                   36 MB/s | 1.5 MB     00:00    
(17/44): perl-File-Path-2.15-2.el8.noarch.rpm               1.8 MB/s |  38 kB     00:00    
(18/44): perl-File-Temp-0.230.600-1.el8.noarch.rpm          3.8 MB/s |  63 kB     00:00    
(19/44): perl-Getopt-Long-2.50-4.el8.noarch.rpm             4.2 MB/s |  63 kB     00:00    
(20/44): perl-IO-1.38-422.el8.x86_64.rpm                    8.8 MB/s | 142 kB     00:00    
(21/44): perl-MIME-Base64-3.15-396.el8.x86_64.rpm           2.1 MB/s |  31 kB     00:00    
(22/44): perl-HTTP-Tiny-0.074-1.el8.noarch.rpm              1.7 MB/s |  58 kB     00:00    
(23/44): perl-PathTools-3.74-1.el8.x86_64.rpm               4.8 MB/s |  90 kB     00:00    
(24/44): perl-Pod-Escapes-1.07-395.el8.noarch.rpm           1.4 MB/s |  20 kB     00:00    
(25/44): perl-Pod-Perldoc-3.28-396.el8.noarch.rpm           5.5 MB/s |  86 kB     00:00    
(26/44): perl-Pod-Simple-3.35-395.el8.noarch.rpm             12 MB/s | 213 kB     00:00    
(27/44): perl-Pod-Usage-1.69-395.el8.noarch.rpm             2.1 MB/s |  34 kB     00:00    
(28/44): perl-Scalar-List-Utils-1.49-2.el8.x86_64.rpm       4.4 MB/s |  68 kB     00:00    
(29/44): perl-Socket-2.027-3.el8.x86_64.rpm                 3.9 MB/s |  59 kB     00:00    
(30/44): perl-Storable-3.11-3.el8.x86_64.rpm                6.2 MB/s |  98 kB     00:00    
(31/44): perl-Term-ANSIColor-4.06-396.el8.noarch.rpm        2.9 MB/s |  46 kB     00:00    
(32/44): perl-Term-Cap-1.17-395.el8.noarch.rpm              1.6 MB/s |  23 kB     00:00    
(33/44): perl-Text-ParseWords-3.30-395.el8.noarch.rpm       1.2 MB/s |  18 kB     00:00    
(34/44): perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch.rpm   1.6 MB/s |  24 kB     00:00    
(35/44): perl-Time-Local-1.280-1.el8.noarch.rpm             2.3 MB/s |  34 kB     00:00    
(36/44): perl-Unicode-Normalize-1.25-396.el8.x86_64.rpm     4.9 MB/s |  82 kB     00:00    
(37/44): perl-constant-1.33-396.el8.noarch.rpm              1.7 MB/s |  25 kB     00:00    
(38/44): perl-macros-5.26.3-422.el8.x86_64.rpm              4.8 MB/s |  73 kB     00:00    
(39/44): perl-libs-5.26.3-422.el8.x86_64.rpm                 50 MB/s | 1.6 MB     00:00    
(40/44): perl-parent-0.237-1.el8.noarch.rpm                 1.4 MB/s |  20 kB     00:00    
(41/44): perl-podlators-4.11-1.el8.noarch.rpm               7.2 MB/s | 118 kB     00:00    
(42/44): perl-threads-2.21-2.el8.x86_64.rpm                 3.8 MB/s |  61 kB     00:00    
(43/44): perl-interpreter-5.26.3-422.el8.x86_64.rpm          68 MB/s | 6.3 MB     00:00    
(44/44): perl-threads-shared-1.58-2.el8.x86_64.rpm          1.1 MB/s |  48 kB     00:00    
--------------------------------------------------------------------------------------------
Total                                                        37 MB/s |  27 MB     00:00     
Running transaction check
Transaction check succeeded.
Running transaction test
Transaction test succeeded.
Running transaction
  Preparing        :                                                                    1/1 
  Installing       : ncurses-6.1-9.20180224.el8.x86_64                                 1/44 
  Installing       : less-530-1.el8.x86_64                                             2/44 
  Installing       : git-core-2.43.0-1.el8.x86_64                                      3/44 
  Installing       : git-core-doc-2.43.0-1.el8.noarch                                  4/44 
  Installing       : groff-base-1.22.3-18.el8.x86_64                                   5/44 
  Installing       : perl-Pod-Escapes-1:1.07-395.el8.noarch                            6/44 
  Installing       : perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch         7/44 
  Installing       : perl-Time-Local-1:1.280-1.el8.noarch                              8/44 
  Installing       : perl-IO-Socket-IP-0.39-5.el8.noarch                               9/44 
  Installing       : perl-Term-ANSIColor-4.06-396.el8.noarch                          10/44 
  Installing       : perl-Term-Cap-1.17-395.el8.noarch                                11/44 
  Installing       : perl-File-Temp-0.230.600-1.el8.noarch                            12/44 
  Installing       : perl-Pod-Simple-1:3.35-395.el8.noarch                            13/44 
  Installing       : perl-HTTP-Tiny-0.074-1.el8.noarch                                14/44 
  Installing       : perl-podlators-4.11-1.el8.noarch                                 15/44 
  Installing       : perl-Pod-Perldoc-3.28-396.el8.noarch                             16/44 
  Installing       : perl-Text-ParseWords-3.30-395.el8.noarch                         17/44 
  Installing       : perl-Pod-Usage-4:1.69-395.el8.noarch                             18/44 
  Installing       : perl-MIME-Base64-3.15-396.el8.x86_64                             19/44 
  Installing       : perl-Storable-1:3.11-3.el8.x86_64                                20/44 
  Installing       : perl-Getopt-Long-1:2.50-4.el8.noarch                             21/44 
  Installing       : perl-Errno-1.28-422.el8.x86_64                                   22/44 
  Installing       : perl-Socket-4:2.027-3.el8.x86_64                                 23/44 
  Installing       : perl-Encode-4:2.97-3.el8.x86_64                                  24/44 
  Installing       : perl-Carp-1.42-396.el8.noarch                                    25/44 
  Installing       : perl-Exporter-5.72-396.el8.noarch                                26/44 
  Installing       : perl-libs-4:5.26.3-422.el8.x86_64                                27/44 
  Installing       : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                       28/44 
  Installing       : perl-parent-1:0.237-1.el8.noarch                                 29/44 
  Installing       : perl-macros-4:5.26.3-422.el8.x86_64                              30/44 
  Installing       : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                     31/44 
  Installing       : perl-Unicode-Normalize-1.25-396.el8.x86_64                       32/44 
  Installing       : perl-File-Path-2.15-2.el8.noarch                                 33/44 
  Installing       : perl-IO-1.38-422.el8.x86_64                                      34/44 
  Installing       : perl-PathTools-3.74-1.el8.x86_64                                 35/44 
  Installing       : perl-constant-1.33-396.el8.noarch                                36/44 
  Installing       : perl-threads-1:2.21-2.el8.x86_64                                 37/44 
  Installing       : perl-threads-shared-1.58-2.el8.x86_64                            38/44 
  Installing       : perl-interpreter-4:5.26.3-422.el8.x86_64                         39/44 
  Installing       : perl-Error-1:0.17025-2.el8.noarch                                40/44 
  Installing       : perl-TermReadKey-2.37-7.el8.x86_64                               41/44 
  Installing       : emacs-filesystem-1:26.1-11.el8.noarch                            42/44 
  Installing       : perl-Git-2.43.0-1.el8.noarch                                     43/44 
  Installing       : git-2.43.0-1.el8.x86_64                                          44/44 
  Running scriptlet: git-2.43.0-1.el8.x86_64                                          44/44 
  Verifying        : git-2.43.0-1.el8.x86_64                                           1/44 
  Verifying        : git-core-2.43.0-1.el8.x86_64                                      2/44 
  Verifying        : git-core-doc-2.43.0-1.el8.noarch                                  3/44 
  Verifying        : perl-Error-1:0.17025-2.el8.noarch                                 4/44 
  Verifying        : perl-Git-2.43.0-1.el8.noarch                                      5/44 
  Verifying        : perl-IO-Socket-IP-0.39-5.el8.noarch                               6/44 
  Verifying        : perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch         7/44 
  Verifying        : perl-TermReadKey-2.37-7.el8.x86_64                                8/44 
  Verifying        : emacs-filesystem-1:26.1-11.el8.noarch                             9/44 
  Verifying        : groff-base-1.22.3-18.el8.x86_64                                  10/44 
  Verifying        : less-530-1.el8.x86_64                                            11/44 
  Verifying        : ncurses-6.1-9.20180224.el8.x86_64                                12/44 
  Verifying        : perl-Carp-1.42-396.el8.noarch                                    13/44 
  Verifying        : perl-Encode-4:2.97-3.el8.x86_64                                  14/44 
  Verifying        : perl-Errno-1.28-422.el8.x86_64                                   15/44 
  Verifying        : perl-Exporter-5.72-396.el8.noarch                                16/44 
  Verifying        : perl-File-Path-2.15-2.el8.noarch                                 17/44 
  Verifying        : perl-File-Temp-0.230.600-1.el8.noarch                            18/44 
  Verifying        : perl-Getopt-Long-1:2.50-4.el8.noarch                             19/44 
  Verifying        : perl-HTTP-Tiny-0.074-1.el8.noarch                                20/44 
  Verifying        : perl-IO-1.38-422.el8.x86_64                                      21/44 
  Verifying        : perl-MIME-Base64-3.15-396.el8.x86_64                             22/44 
  Verifying        : perl-PathTools-3.74-1.el8.x86_64                                 23/44 
  Verifying        : perl-Pod-Escapes-1:1.07-395.el8.noarch                           24/44 
  Verifying        : perl-Pod-Perldoc-3.28-396.el8.noarch                             25/44 
  Verifying        : perl-Pod-Simple-1:3.35-395.el8.noarch                            26/44 
  Verifying        : perl-Pod-Usage-4:1.69-395.el8.noarch                             27/44 
  Verifying        : perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                       28/44 
  Verifying        : perl-Socket-4:2.027-3.el8.x86_64                                 29/44 
  Verifying        : perl-Storable-1:3.11-3.el8.x86_64                                30/44 
  Verifying        : perl-Term-ANSIColor-4.06-396.el8.noarch                          31/44 
  Verifying        : perl-Term-Cap-1.17-395.el8.noarch                                32/44 
  Verifying        : perl-Text-ParseWords-3.30-395.el8.noarch                         33/44 
  Verifying        : perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                     34/44 
  Verifying        : perl-Time-Local-1:1.280-1.el8.noarch                             35/44 
  Verifying        : perl-Unicode-Normalize-1.25-396.el8.x86_64                       36/44 
  Verifying        : perl-constant-1.33-396.el8.noarch                                37/44 
  Verifying        : perl-interpreter-4:5.26.3-422.el8.x86_64                         38/44 
  Verifying        : perl-libs-4:5.26.3-422.el8.x86_64                                39/44 
  Verifying        : perl-macros-4:5.26.3-422.el8.x86_64                              40/44 
  Verifying        : perl-parent-1:0.237-1.el8.noarch                                 41/44 
  Verifying        : perl-podlators-4.11-1.el8.noarch                                 42/44 
  Verifying        : perl-threads-1:2.21-2.el8.x86_64                                 43/44 
  Verifying        : perl-threads-shared-1.58-2.el8.x86_64                            44/44 
Installed products updated.

Installed:
  emacs-filesystem-1:26.1-11.el8.noarch                                                     
  git-2.43.0-1.el8.x86_64                                                                   
  git-core-2.43.0-1.el8.x86_64                                                              
  git-core-doc-2.43.0-1.el8.noarch                                                          
  groff-base-1.22.3-18.el8.x86_64                                                           
  less-530-1.el8.x86_64                                                                     
  ncurses-6.1-9.20180224.el8.x86_64                                                         
  perl-Carp-1.42-396.el8.noarch                                                             
  perl-Encode-4:2.97-3.el8.x86_64                                                           
  perl-Errno-1.28-422.el8.x86_64                                                            
  perl-Error-1:0.17025-2.el8.noarch                                                         
  perl-Exporter-5.72-396.el8.noarch                                                         
  perl-File-Path-2.15-2.el8.noarch                                                          
  perl-File-Temp-0.230.600-1.el8.noarch                                                     
  perl-Getopt-Long-1:2.50-4.el8.noarch                                                      
  perl-Git-2.43.0-1.el8.noarch                                                              
  perl-HTTP-Tiny-0.074-1.el8.noarch                                                         
  perl-IO-1.38-422.el8.x86_64                                                               
  perl-IO-Socket-IP-0.39-5.el8.noarch                                                       
  perl-MIME-Base64-3.15-396.el8.x86_64                                                      
  perl-Mozilla-CA-20160104-7.module_el8+645+9d809f8c.noarch                                 
  perl-PathTools-3.74-1.el8.x86_64                                                          
  perl-Pod-Escapes-1:1.07-395.el8.noarch                                                    
  perl-Pod-Perldoc-3.28-396.el8.noarch                                                      
  perl-Pod-Simple-1:3.35-395.el8.noarch                                                     
  perl-Pod-Usage-4:1.69-395.el8.noarch                                                      
  perl-Scalar-List-Utils-3:1.49-2.el8.x86_64                                                
  perl-Socket-4:2.027-3.el8.x86_64                                                          
  perl-Storable-1:3.11-3.el8.x86_64                                                         
  perl-Term-ANSIColor-4.06-396.el8.noarch                                                   
  perl-Term-Cap-1.17-395.el8.noarch                                                         
  perl-TermReadKey-2.37-7.el8.x86_64                                                        
  perl-Text-ParseWords-3.30-395.el8.noarch                                                  
  perl-Text-Tabs+Wrap-2013.0523-395.el8.noarch                                              
  perl-Time-Local-1:1.280-1.el8.noarch                                                      
  perl-Unicode-Normalize-1.25-396.el8.x86_64                                                
  perl-constant-1.33-396.el8.noarch                                                         
  perl-interpreter-4:5.26.3-422.el8.x86_64                                                  
  perl-libs-4:5.26.3-422.el8.x86_64                                                         
  perl-macros-4:5.26.3-422.el8.x86_64                                                       
  perl-parent-1:0.237-1.el8.noarch                                                          
  perl-podlators-4.11-1.el8.noarch                                                          
  perl-threads-1:2.21-2.el8.x86_64                                                          
  perl-threads-shared-1.58-2.el8.x86_64                                                     

Complete!
[root@ststor01 ~]# git config --global user.email "your.email@example.com"
[root@ststor01 ~]# git config --global user.name "Your Name"
[root@ststor01 ~]# cd /opt/
[root@ststor01 opt]# ls
[root@ststor01 opt]# mkdir /opt/blog.git
[root@ststor01 opt]# cd /opt/blog.git
[root@ststor01 blog.git]# git init --bare
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint:   git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint:   git branch -m <name>
Initialized empty Git repository in /opt/blog.git/
[root@ststor01 blog.git]# ls
HEAD  branches  config  description  hooks  info  objects  refs
[root@ststor01 blog.git]# cd /tmp/
[root@ststor01 tmp]# ls
ks-script-kzk1nzfd  ks-script-l36mq90h  readme.md  update
[root@ststor01 tmp]# cat update 
#!/bin/sh
if [ "$1" == refs/heads/master ];
then
  echo "Manual pushes to the master branch is restricted!!"
  exit 1
fi[root@ststor01 tmp]# # Copy update hook to block direct pushes to master branch
[root@ststor01 tmp]# sudo cp /tmp/update /opt/blog.git/hooks/
[root@ststor01 tmp]# sudo chmod +x /opt/blog.git/hooks/update
[root@ststor01 tmp]# cd /opt/blog.git/hooks/
[root@ststor01 hooks]# ls
applypatch-msg.sample      pre-commit.sample        prepare-commit-msg.sample
commit-msg.sample          pre-merge-commit.sample  push-to-checkout.sample
fsmonitor-watchman.sample  pre-push.sample          sendemail-validate.sample
post-update.sample         pre-rebase.sample        update
pre-applypatch.sample      pre-receive.sample       update.sample
[root@ststor01 hooks]# cd ..
[root@ststor01 blog.git]# cd ..
[root@ststor01 opt]# cd ..
[root@ststor01 /]# mkdir -p /usr/src/kodekloudrepos
[root@ststor01 /]# cd /usr/src/kodekloudrepos
[root@ststor01 kodekloudrepos]# git clone /opt/blog.git blog
Cloning into 'blog'...
warning: You appear to have cloned an empty repository.
done.
[root@ststor01 kodekloudrepos]# ls
blog
[root@ststor01 kodekloudrepos]# # Create and switch to a new branch
[root@ststor01 kodekloudrepos]# cd /usr/src/kodekloudrepos/blog
[root@ststor01 blog]# git checkout -b xfusioncorp_blog
Switched to a new branch 'xfusioncorp_blog'
[root@ststor01 blog]# # Copy readme.md file to the repository, add/commit, and push the branch to origin
[root@ststor01 blog]# sudo cp /tmp/readme.md /usr/src/kodekloudrepos/blog/
[root@ststor01 blog]# cd /usr/src/kodekloudrepos/blog
[root@ststor01 blog]# git add .
[root@ststor01 blog]# git commit -m "Add readme.md file"
[xfusioncorp_blog (root-commit) 83af66f] Add readme.md file
 1 file changed, 1 insertion(+)
 create mode 100644 readme.md
[root@ststor01 blog]# git push origin xfusioncorp_blog
Enumerating objects: 3, done.
Counting objects: 100% (3/3), done.
Writing objects: 100% (3/3), 252 bytes | 252.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
To /opt/blog.git
 * [new branch]      xfusioncorp_blog -> xfusioncorp_blog
[root@ststor01 blog]# # Create a master branch from xfusioncorp_blog branch
[root@ststor01 blog]# git checkout -b master xfusioncorp_blog
Switched to a new branch 'master'
Your branch is based on 'origin/master', but the upstream is gone.
  (use "git branch --unset-upstream" to fixup)
[root@ststor01 blog]# git push origin master
Total 0 (delta 0), reused 0 (delta 0), pack-reused 0
remote: Manual pushes to the master branch is restricted!!
remote: error: hook declined to update refs/heads/master
To /opt/blog.git
 ! [remote rejected] master -> master (hook declined)
error: failed to push some refs to '/opt/blog.git'
[root@ststor01 blog]# 
```
